<!DOCTYPE html>
<html >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        PDF Thumbnails
    </title>
    <link href="bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- PDF.js and Simple PDF Thumbnail scripts -->
    <script src="pdfThumbnails.js" data-pdfjs-src="pdf.js/build/pdf.js"></script>
    <style>

    </style>
</head>

<body>
<!-- Page Content -->
<div class="container" id="maincontent">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">PDF Thumbnails
            </h1>

        </div>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <h1><a href=<%='/?at='+pre%>>Back To Pre</a></h1>
        </div>
        <div class="col-sm-12">
            <h2>Folder list</h2>
        </div>
        <div class="col-sm-12">
            <%for(let i=0;i<pdfdir.length;i++){%>
                    <h3><a href=<%='/?at='+encodeURI(pdfdir[i])%>><%=pdfdir[i]%></a></h3>
            <%}%> 
        </div>
    </div>
    <hr>
    <%var presize = 4%>
    <%for(let i=0;i<pdflist.length;i++){%>
        <%if(i%presize==0){%>
            <div class="row">
        <%}%>
        <div class=<%="col-sm-"+parseInt(12/presize)%>
            <h4><%=pdflist[i]['pdf'].substr(pdflist[i]['pdf'].lastIndexOf('\\') + 1,30)%></h4>
            <h4>size: <%=pdflist[i]['size']%></h4>
            <a href=<%=encodeURI(pdflist[i]['pdf'])%> target=_blank>
                <%if(pdflist[i]['thumb'] != ''){%>
                    <img class="img-responsive" src=<%=encodeURI(pdflist[i]['thumb'])%>>
                <%}else{%>
                    <img class="img-responsive" data-pdf-thumbnail-file=<%=encodeURI(pdflist[i]['pdf'])%> src="pdf.png">
                <%}%>
            </a>
        </div>
        <%if(i%presize==presize-1 || i == pdflist.length-1){%>
            </div>
            <hr>
        <%}%>
    <%}%> 
</div>
</body>
</html>